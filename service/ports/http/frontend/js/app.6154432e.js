(function(){"use strict";var e={2884:function(e,t,r){var o=r(9242),s=r(3396);const n={class:"wrapper"},i={class:"content"};function c(e,t,r,o,c,a){const l=(0,s.up)("Header"),u=(0,s.up)("Notifications"),d=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(l),(0,s._)("div",i,[(0,s.Wm)(u),(0,s.Wm)(d)])])}var a,l=r(7327),u=r(6520),d=r(65),p=r(4161);class f{constructor(e,t){(0,l.Z)(this,"style",void 0),(0,l.Z)(this,"text",void 0),this.style=e,this.text=t}}(function(e){e["SetUser"]="setUser",e["PushNotificationError"]="pushNotificationError",e["DismissNotification"]="dismissNotification"})(a||(a={}));var h=(0,d.MT)({state:{user:void 0,notifications:[]},getters:{},mutations:{[a.SetUser](e,t){e.user=t},[a.PushNotificationError](e,t){e.notifications?.push(new f("error",t))},[a.DismissNotification](e,t){e.notifications?.splice(t,1)}},actions:{},modules:{}});class v{constructor(e){(0,l.Z)(this,"store",void 0),(0,l.Z)(this,"axios",p.Z.create()),this.store=e}currentUser(){const e="/api/current-user";return this.axios.get(e)}logout(){const e="/api/current-user";return this.axios.delete(e)}publicKeys(){const e="/api/public-keys";return this.axios.get(e)}addPublicKey(e){const t="/api/public-keys";return this.axios.post(t,e)}logoutCurrentUser(){return new Promise(((e,t)=>{this.logout().then((()=>{this.store.commit(a.SetUser,null),e()}),(e=>{t(e)}))}))}refreshCurrentUser(){return new Promise(((e,t)=>{this.currentUser().then((t=>{this.store.commit(a.SetUser,t.data.user),e(t.data)}),(e=>{t(e)}))}))}}var g=r.p+"img/logo.79c97fb0.svg";const b=e=>((0,s.dD)("data-v-5ad51a16"),e=e(),(0,s.Cn)(),e),y=b((()=>(0,s._)("a",{class:"logo",href:"/"},[(0,s._)("img",{src:g})],-1))),m=b((()=>(0,s._)("nav",null,[(0,s._)("ul",null,[(0,s._)("li",null,[(0,s._)("a",{href:"https://nos.social"},"Download Nos")]),(0,s._)("li",null,[(0,s._)("a",{href:"https://github.com/planetary-social/nos-crossposting-service"},"Source code")])])],-1)));function w(e,t,r,o,n,i){const c=(0,s.up)("LogoutButton");return(0,s.wg)(),(0,s.iD)("header",null,[y,m,e.userIsLoggedIn?((0,s.wg)(),(0,s.j4)(c,{key:0})):(0,s.kq)("",!0)])}var _=r.p+"img/logout_on_light.d9f6b5e8.svg";const k=e=>((0,s.dD)("data-v-5ac017a3"),e=e(),(0,s.Cn)(),e),D=k((()=>(0,s._)("div",{class:"label"}," Logout ",-1))),R=k((()=>(0,s._)("img",{class:"icon",src:_},null,-1))),O=[D,R];function P(e,t,r,o,n,i){return(0,s.wg)(),(0,s.iD)("a",{class:"logout-button",onClick:t[0]||(t[0]=(...t)=>e.logout&&e.logout(...t))},O)}var j=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let Z=class extends u.w3{constructor(...e){super(...e),(0,l.Z)(this,"apiService",new v((0,d.oR)())),(0,l.Z)(this,"store",(0,d.oR)())}logout(){this.apiService.logoutCurrentUser().catch((()=>{this.store.commit(a.PushNotificationError,"Error logging out the user.")}))}};Z=j([(0,u.Ei)({})],Z);var x=Z,C=r(89);const E=(0,C.Z)(x,[["render",P],["__scopeId","data-v-5ac017a3"]]);var U=E,I=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let K=class extends u.w3{constructor(...e){super(...e),(0,l.Z)(this,"store",(0,d.oR)())}get userIsLoggedIn(){return!!this.store.state.user}};K=I([(0,u.Ei)({components:{LogoutButton:U}})],K);var N=K;const S=(0,C.Z)(N,[["render",w],["__scopeId","data-v-5ad51a16"]]);var L=S,W=r(7139);const B={class:"notifications"},V={class:"text"},q=["onClick"];function z(e,t,r,o,n,i){return(0,s.wg)(),(0,s.iD)("ul",B,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.notifications,((t,r)=>((0,s.wg)(),(0,s.iD)("li",{class:(0,W.C_)(["notification",[t.style]]),key:r},[(0,s._)("div",V,(0,W.zw)(t.text),1),(0,s._)("div",{class:"button",onClick:t=>e.dismiss(r)}," X ",8,q)],2)))),128))])}var T=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let X=class extends u.w3{constructor(...e){super(...e),(0,l.Z)(this,"store",(0,d.oR)())}get notifications(){return this.store.state.notifications}dismiss(e){this.store.commit(a.DismissNotification,e)}};X=T([(0,u.Ei)({components:{}})],X);var H=X;const Y=(0,C.Z)(H,[["render",z],["__scopeId","data-v-11301b3e"]]);var M=Y,$=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let A=class extends u.w3{constructor(...e){super(...e),(0,l.Z)(this,"apiService",new v((0,d.oR)())),(0,l.Z)(this,"store",(0,d.oR)())}created(){this.apiService.refreshCurrentUser().catch((()=>{this.store.commit(a.PushNotificationError,"Error loading the user.")}))}};A=$([(0,u.Ei)({components:{Notifications:M,Header:L}})],A);var F=A;const G=(0,C.Z)(F,[["render",c]]);var J=G,Q=r(2483);const ee=e=>((0,s.dD)("data-v-2aac08a8"),e=e(),(0,s.Cn)(),e),te={class:"home"},re={key:0},oe=ee((()=>(0,s._)("div",{class:"step"}," 1. Link your X account: ",-1))),se={key:1},ne=ee((()=>(0,s._)("div",{class:"step"}," 1. Logged in as ",-1))),ie=ee((()=>(0,s._)("div",{class:"step"}," 2. Your nostr identities: ",-1))),ce={key:2,class:"public-keys-wrapper"},ae={key:0},le={key:1,class:"public-keys"},ue={class:"npub"},de={class:"link-npub-form"};function pe(e,t,r,o,n,i){const c=(0,s.up)("Explanation"),a=(0,s.up)("LogInWithTwitterButton"),l=(0,s.up)("CurrentUser"),u=(0,s.up)("Checkmark"),d=(0,s.up)("Input"),p=(0,s.up)("Button");return(0,s.wg)(),(0,s.iD)("div",te,[(0,s.Wm)(c),e.loadingUser||e.user?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",re,[oe,(0,s.Wm)(a)])),!e.loadingUser&&e.user?((0,s.wg)(),(0,s.iD)("div",se,[ne,(0,s.Wm)(l,{user:e.user},null,8,["user"])])):(0,s.kq)("",!0),ie,!e.loadingUser&&e.user?((0,s.wg)(),(0,s.iD)("div",ce,[e.publicKeys?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ae," Loading public keys... ")),e.publicKeys&&e.publicKeys.publicKeys?.length>0?((0,s.wg)(),(0,s.iD)("ul",le,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.publicKeys.publicKeys,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.npub},[(0,s._)("div",ue,(0,W.zw)(e.npub),1),(0,s.Wm)(u)])))),128))])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),(0,s._)("div",de,[(0,s.Wm)(d,{placeholder:"Paste your npub address",modelValue:e.npub,"onUpdate:modelValue":t[0]||(t[0]=t=>e.npub=t),disabled:e.formDisabled},null,8,["modelValue","disabled"]),(0,s.Wm)(p,{text:"Add",onClick:e.addPublicKey,disabled:e.formDisabled},null,8,["onClick","disabled"])])])}var fe=r(4815);const he=e=>((0,s.dD)("data-v-e0b84cee"),e=e(),(0,s.Cn)(),e),ve={class:"explanation"},ge=he((()=>(0,s._)("div",{class:"large"}," Start posting your Nostr content on X ",-1))),be=he((()=>(0,s._)("div",{class:"small"}," Log in to your X account and add your Nostr identities so that everything you publish on Nostr will be mirrored on X ",-1))),ye=[ge,be];function me(e,t,r,o,n,i){return(0,s.wg)(),(0,s.iD)("div",ve,ye)}var we=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let _e=class extends u.w3{};_e=we([(0,u.Ei)({})],_e);var ke=_e;const De=(0,C.Z)(ke,[["render",me],["__scopeId","data-v-e0b84cee"]]);var Re=De,Oe=r.p+"img/login_with_x.b3cda31f.svg";const Pe=e=>((0,s.dD)("data-v-153ecc92"),e=e(),(0,s.Cn)(),e),je={href:"/login",class:"log-in-with-twitter-button"},Ze=Pe((()=>(0,s._)("div",{class:"img-wrapper"},[(0,s._)("img",{src:Oe})],-1))),xe=[Ze];function Ce(e,t,r,o,n,i){return(0,s.wg)(),(0,s.iD)("a",je,xe)}var Ee=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let Ue=class extends u.w3{};Ue=Ee([(0,u.Ei)({})],Ue);var Ie=Ue;const Ke=(0,C.Z)(Ie,[["render",Ce],["__scopeId","data-v-153ecc92"]]);var Ne=Ke,Se=r.p+"img/logout_on_dark.2eaec2bd.svg";const Le=e=>((0,s.dD)("data-v-769a601f"),e=e(),(0,s.Cn)(),e),We={class:"current-user"},Be={class:"user-info"},Ve=["src"],qe={class:"name"},ze={class:"username"},Te=Le((()=>(0,s._)("img",{src:Se},null,-1))),Xe=[Te];function He(e,t,r,o,n,i){const c=(0,s.up)("Checkmark");return(0,s.wg)(),(0,s.iD)("div",We,[(0,s._)("div",Be,[(0,s._)("img",{class:"image",src:e.user?.twitterProfileImageURL},null,8,Ve),(0,s._)("div",qe,(0,W.zw)(e.user.twitterName),1),(0,s._)("div",ze,"@"+(0,W.zw)(e.user.twitterUsername),1),(0,s._)("a",{class:"logout-button",onClick:t[0]||(t[0]=(...t)=>e.logout&&e.logout(...t))},Xe)]),(0,s.Wm)(c)])}class Ye{constructor(){(0,l.Z)(this,"accountID",void 0),(0,l.Z)(this,"twitterID",void 0),(0,l.Z)(this,"twitterName",void 0),(0,l.Z)(this,"twitterUsername",void 0),(0,l.Z)(this,"twitterProfileImageURL",void 0)}}var Me=r.p+"img/checkmark.3921dcf8.svg";const $e={class:"checkmark",src:Me};function Ae(e,t,r,o,n,i){return(0,s.wg)(),(0,s.iD)("img",$e)}var Fe=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let Ge=class extends u.w3{};Ge=Fe([(0,u.Ei)({})],Ge);var Je=Ge;const Qe=(0,C.Z)(Je,[["render",Ae]]);var et=Qe,tt=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let rt=class extends u.w3{constructor(...e){super(...e),(0,l.Z)(this,"user",void 0),(0,l.Z)(this,"apiService",new v((0,d.oR)())),(0,l.Z)(this,"store",(0,d.oR)())}logout(){this.apiService.logoutCurrentUser().catch((()=>{this.store.commit(a.PushNotificationError,"Error logging out the user.")}))}};rt=tt([(0,u.Ei)({components:{Checkmark:et},props:{user:Ye}})],rt);var ot=rt;const st=(0,C.Z)(ot,[["render",He],["__scopeId","data-v-769a601f"]]);var nt=st;class it{constructor(e){(0,l.Z)(this,"npub",void 0),this.npub=e}}const ct=["placeholder","value","disabled"];function at(e,t,r,o,n,i){return(0,s.wg)(),(0,s.iD)("input",{type:"text",placeholder:e.placeholder,value:e.modelValue,onInput:t[0]||(t[0]=(...t)=>e.onInput&&e.onInput(...t)),class:(0,W.C_)({disabled:e.disabled}),disabled:e.disabled},null,42,ct)}var lt=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let ut=class extends u.w3{constructor(...e){super(...e),(0,l.Z)(this,"placeholder",void 0),(0,l.Z)(this,"modelValue",void 0),(0,l.Z)(this,"disabled",void 0)}onInput(e){this.$emit("update:modelValue",e.target.value)}};ut=lt([(0,u.Ei)({props:{placeholder:String,modelValue:String,disabled:Boolean},emits:["update:modelValue"]})],ut);var dt=ut;const pt=(0,C.Z)(dt,[["render",at],["__scopeId","data-v-745941ea"]]);var ft=pt;function ht(e,t,r,o,n,i){return(0,s.wg)(),(0,s.iD)("button",{onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t)),class:(0,W.C_)({disabled:e.disabled})},(0,W.zw)(e.text),3)}var vt=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let gt=class extends u.w3{constructor(...e){super(...e),(0,l.Z)(this,"text",void 0),(0,l.Z)(this,"disabled",void 0)}onClick(e){this.$emit("click",e)}};gt=vt([(0,u.Ei)({props:{text:String,disabled:Boolean}})],gt);var bt=gt;const yt=(0,C.Z)(bt,[["render",ht],["__scopeId","data-v-6b71f555"]]);var mt=yt,wt=function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};let _t=class extends u.w3{constructor(...e){super(...e),(0,l.Z)(this,"apiService",new v((0,d.oR)())),(0,l.Z)(this,"store",(0,d.oR)()),(0,l.Z)(this,"publicKeys",null),(0,l.Z)(this,"npub","")}get loadingUser(){return void 0===this.store.state.user}get user(){return this.store.state.user}get formDisabled(){return this.loadingUser||!this.user}watchUser(e,t){t?this.reloadPublicKeys():this.publicKeys={publicKeys:[]}}addPublicKey(){this.apiService.addPublicKey(new it(this.npub)).then((()=>{this.npub="",this.reloadPublicKeys()})).catch((()=>{this.store.commit(a.PushNotificationError,"Error adding the public key.")}))}reloadPublicKeys(){this.publicKeys=null,this.apiService.publicKeys().then((e=>{this.publicKeys=e.data})).catch((e=>{e.response&&401===e.response.status||this.store.commit(a.PushNotificationError,"Error loading the public keys.")}))}};wt([(0,fe.RL)("user")],_t.prototype,"watchUser",null),_t=wt([(0,u.Ei)({components:{Checkmark:et,Button:mt,CurrentUser:nt,LogInWithTwitterButton:Ne,Explanation:Re,Input:ft}})],_t);var kt=_t;const Dt=(0,C.Z)(kt,[["render",pe],["__scopeId","data-v-2aac08a8"]]);var Rt=Dt;const Ot=[{path:"/",name:"home",component:Rt}],Pt=(0,Q.p7)({history:(0,Q.PO)("/"),routes:Ot});var jt=Pt;(0,o.ri)(J).use(h).use(jt).mount("#app")}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,o,s,n){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],n=e[u][2];for(var c=!0,a=0;a<o.length;a++)(!1&n||i>=n)&&Object.keys(r.O).every((function(e){return r.O[e](o[a])}))?o.splice(a--,1):(c=!1,n<i&&(i=n));if(c){e.splice(u--,1);var l=s();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,s,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.p="/"}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,n,i=o[0],c=o[1],a=o[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(s in c)r.o(c,s)&&(r.m[s]=c[s]);if(a)var u=a(r)}for(t&&t(o);l<i.length;l++)n=i[l],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},o=self["webpackChunknos_crossposting_service_frontend"]=self["webpackChunknos_crossposting_service_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(2884)}));o=r.O(o)})();
//# sourceMappingURL=app.6154432e.js.map